# PROJECT_MAP.md  

Этот документ представляет карту проекта бота для крипто-торговли — полный список файлов в репозитории с пояснениями. Для каждого файла кратко описано, какую функцию он выполняет, какие данные использует и какова его роль в общей системе бота.  

## Основные файлы приложения (ядро бота и стратегия)  

- **ebot.py** – главный исполняемый скрипт бота. Он инициализирует систему: загружает конфигурацию, устанавливает параметры (основная биржа, режим dry/live), запускает цикл обработки сигналов. Для каждой пары вызывает стратегию, получает сигнал BUY/SELL/HOLD, решает, открывать или закрывать позицию. В DRY пишет сделки в **trades_dry**, в LIVE работает через exch/.  

- **config.py** – все настройки (DRY_RUN, TELEGRAM, TRADE, EXCHANGES, STRATEGY и др.).  

- **notify.py** – формирование и отправка сообщений в Telegram (сделки, отчёты). Учитывает DRY/LIVE, баланс, PnL, total equity.  

- **trade.log** – текстовый лог сделок (тестовые и реальные). Формат: одна строка на сделку с полями: ts, side, symbol, qty, price, pnl, equity.  

- **signals.log** – текстовый лог сигналов стратегии (пересечения EMA).  
  - Формат: ts_ms, human_ts, symbol, exchange, interval, signal_type, EMA_fast, EMA_slow, gap_bps, decision, reason.  
  - Лог создаётся автоматически при первом сигнале.  

## Папки  
- **strategies/** – торговые стратегии.  
- **core/** – ядро сигналов, обработка входов.  
- **db/** – база (модели, миграции, i/o).  
- **services/** – сервисы (ценовой агрегатор, загрузка свечей, отчёты).  
- **exch/** – клиенты бирж.  
- **logs/**, **cache/**, **data/** – инфраструктура.  

## Документация  
- PROJECT_MAP.md — карта проекта.  
- VARIABLES.md — словарь переменных и таблиц.  
- КОДЕКС.md — правила проекта.  
- CHECKLIST_Ebot_DRY_issues.md — чеклист отладки DRY-режима.  

> Важно: DRY-режим пишет сделки только в `trades_dry`; LIVE-режим — только в `trades_live`. Смешение таблиц считается багом.  

# Всегда выдавать этот файл блоком для копирования без форматирования и символов, которые могут порвать блок.
